<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">
<div layout:fragment="content">
<form class="border bg-light p-3" th:action="@{/members/login}" role="form" method="post">
    <div class="form-group">
        <label th:for="email">이메일주소</label>
        <input type="email" name="email" class="form-control" >
    </div>
    <div class="form-group">
        <label th:for="password">비밀번호</label>
        <input type="password" name="password" class="form-control">
    </div>
    <div class="text-right">
        <a th:href="@{/member/new}" class="btn btn-secondary btn-sm">회원가입</a>
        <button type="submit" class="btn btn-primary btn-sm">회원가입</button>
    </div>
</form>
</div>

<th:block layout:fragment="script">
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script>
	function postcode() {
		new daum.Postcode({
			oncomplete: function(data) {
				let addr = "";
				let extraAddr = "";
				if (data.userSelectedType === "R") {
					addr = data.roadAddress;
					
					if (data.bname !== '' && /[동|로|가|]$/g.test(data.bname)) {
						extraAddr += data.bname;
					} 
					if (data.buildingName !== '' && data.apartment === 'Y') {
						extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
					}
					
					if (extraAddr !== '') {
						extraAddr = ' ('+extraAddr+')'
					}
				} else {
					addr = data.jibunAddress;
				}
				
				document.querySelector("input[name=zipcode]").value = data.zonecode;
				document.querySelector("input[name=address1]").value = addr;
				document.querySelector("input[name=address2]").value = extraAddr;
				document.querySelector("input[name=address2]").focus();
			}
		}).open();
	}
</script>
</html>